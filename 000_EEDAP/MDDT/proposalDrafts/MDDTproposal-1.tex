\documentclass{article}%
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{geometry}%
\setcounter{MaxMatrixCols}{30}
%TCIDATA{OutputFilter=latex2.dll}
%TCIDATA{Version=5.50.0.2960}
%TCIDATA{CSTFile=SPIE Proceedings Style.cst}
%TCIDATA{Created=Monday, January 09, 2017 11:17:45}
%TCIDATA{LastRevised=Monday, January 09, 2017 12:54:11}
%TCIDATA{<META NAME="GraphicsSave" CONTENT="32">}
%TCIDATA{<META NAME="SaveForMode" CONTENT="1">}
%TCIDATA{BibliographyScheme=BibTeX}
%TCIDATA{<META NAME="DocumentShell" CONTENT="Standard LaTeX\Blank - Standard LaTeX Article">}
%BeginMSIPreambleData
\providecommand{\U}[1]{\protect\rule{.1in}{.1in}}
%EndMSIPreambleData
\newtheorem{theorem}{Theorem}
\newtheorem{acknowledgement}[theorem]{Acknowledgement}
\newtheorem{algorithm}[theorem]{Algorithm}
\newtheorem{axiom}[theorem]{Axiom}
\newtheorem{case}[theorem]{Case}
\newtheorem{claim}[theorem]{Claim}
\newtheorem{conclusion}[theorem]{Conclusion}
\newtheorem{condition}[theorem]{Condition}
\newtheorem{conjecture}[theorem]{Conjecture}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{criterion}[theorem]{Criterion}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}
\newtheorem{exercise}[theorem]{Exercise}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{notation}[theorem]{Notation}
\newtheorem{problem}[theorem]{Problem}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{solution}[theorem]{Solution}
\newtheorem{summary}[theorem]{Summary}
\newenvironment{proof}[1][Proof]{\noindent\textbf{#1.} }{\ \rule{0.5em}{0.5em}}
\begin{document}

\title{MDDT proposal for eeDAP:\ evaluation environment for digital and analog pathology}
\date{9 January 2017}
\maketitle

\section{Authors and Affiliation}

Brandon D. Gallas and Qi Gong

\begin{itemize}
\item FDA/CDRH Office of Science and Engineering Laboratories, Division of
Imaging, Diagnostics, and Software Reliability\newline Silver Spring, MD, 20903
\end{itemize}

\section{Product Description}

\label{product-description}

eeDAP is being proposed as an MDDT for Clinical Outcome Assessments (COA).
eeDAP is an evaluation environment for digital and analog pathology. eeDAP is
a software and hardware platform for designing and executing digital and
analog (microscope) pathology studies where the digital scan of a glass slide,
or whole slide image (WSI) is registered to the real-time view of the
corresponding glass slide on the microscope. This registration allows for
different pathologists to evaluate the same fields of view (FOVs) in digital
mode or in microscope mode. Consequently, it is possible to reduce or
eliminate a large source of variability in comparing these modalities in the
hands of the pathologist: the FOVs (the tissue) being evaluated. In fact, the
current registration precision of eeDAP allows for the evaluation of the same
individual cell in both domains. As such, a study can be designed where
pathologists are asked to evaluate a preselected list of individual cells or
specific FOVs in the digital mode and with the microscope. Consequently,
paired observations from co-registered FOVs are collected allowing for a tight
comparison between WSI and optical microscopy.

A reader study with eeDAP is intended to evaluate the scanned image, not the
clinical workflow of a pathologist or lab. Instead of recording a typical
pathology report, eeDAP enables the collection of explicit evaluation
responses (formatted data) from the pathologist corresponding to very narrow
tasks. This approach removes the ambiguity related to the range of language
and the scope that different pathologists use in their reports.

Reader studies utilizing eeDAP are meant to focus on tasks related to specific
histopathology features. Since certain image features can challenge image
quality properties (color fidelity, focus quality, and depth of field), reader
studies with tasks based on features can provide valuable information for the
assessment of WSI and its role in clinical practice. eeDAP allows for the
formulation of different types of tasks, many of which are currently available
in eeDAP: free-text, integer input for counting tasks, a slider in a
predefined range for a confidence scoring task (ROC task, receiver operating
characteristic task), check boxes of specific categories for a classification
task, and marking the image for a search task. These simple tasks can be
customized with moderate MATLAB programming skills to suit the study's
specific purposes.

In what follows, we provide a quick summary of the eeDAP hardware and
software. More details can be found in a paper by Gallas et al.
\cite{Gallas2014_J-Med-Img_v1p037501}.

\subsection{eeDAP Hardware}

\label{eedap-hardware}

The eeDAP hardware includes a microscope with a camera (mounted for
simultaneous viewing with the eyepiece), a motorized stage (programmable with
a stage controller and joystick), and computer with a monitor as shown in
Figure 1. There is also a reticle in the microscope eyepiece. The reticle in
the eyepiece is also synthesized in software; the reticle marks are
superimposed on the digital WSI and on the camera image. The reticle serves
two purposes. The reticle marks allow for the localization of specific
features during image registration. The reticle marks are also used to help
reduce the area of the FOV or to specify individual cells to evaluate.

eeDAP supports usb and FireWire (IEEE 1394) cameras. The camera pixel sizes
tested are smaller than 10um. At 40x magnification, this corresponds to camera
pixels that cover areas smaller than 0.25 x 0.25 um\textsuperscript{2}; in the
common parlance, we say that the camera resolution is 0.25 um/pixel. Regarding
the motorized stage, eeDAP supports communications with Ludl and Prior stages.
The step size for the stages tested are smaller than 0.1 um.

\begin{figure}[ptbh]
\label{fig_full-eeDAPhardware}
\includegraphics[width=6.50000in]{C:/000_github/000_EEDAP/MDDT/figures/full-eeDAPhardware.pdf}\caption{The
eeDAP hardware: microscope, camera, computer-controlled stage with joystick,
and a computer with monitor (not shown).}%
\end{figure}

\subsection{eeDAP Software}

\label{eedap-software}

The eeDAP software is made up of graphical user interfaces (GUIs) written in
MATLAB \cite{MatlabRuntime2016}. Using eeDAP does not require a full licensed
version of MATLAB. It can be run as a precompiled stand-alone application. The
precompiled stand-alone application requires that the free MATLAB compiler
runtime (MCR) library be installed \cite{MatlabRuntime2016}. The software uses
the Bio-formats library to read WSI images and extract FOVs
\cite{BioFormats2016}. Normally the resolution of 40x WSI images is about 0.25
um/pixel. The Bio-formats library supports several proprietary WSI image
formats such as svs, ndpi and tiff. Previous versions of eeDAP used
ImageScope, a product of Aperio (a Leica Biosystems Division), which contains
an ActiveX control named TIFFcomp to read proprietary WSI images. The change
to bio-formats was made because it is better supported, it has fewer
limitations (TIFFcomp could only be used with 32-bit MATLAB on Windows), and
it is available under the GNU public \textquotedblright
copyleft\textquotedblright\ licenses.

The eeDAP software is made up of three GUIs: \textbf{study initialization,
global image registration, and data collection}. During \textbf{study
initialization}, eeDAP reads a study-specific input file. The input file
contains the filenames of the WSIs, hardware specifications, and the list of
tasks with corresponding FOV locations that will be interpreted by the
pathologist. At the end of the study initialization, eeDAP extracts all the
WSI FOVs for fast access and transforms the colors so that the image viewed in
eeDAP is the same as the image viewed on the scanner-specific viewer.

\textbf{Global image registration} is only done if eeDAP is run in MicroRT
mode. The global image registration is equivalent to finding the mathematical
relationship between the stage coordinates and WSI coordinates. It allows the
stage to move to a location that is the same as the WSI location. The global
image registration requires three anchors, three pairs of stage-WSI registered
coordinates. Each anchor is generated by a local registration: an (x,y) stage
coordinate and an (x,y) WSI coordinate that correspond to the same specimen
location. The local registration is an interactive process with a study
administrator. The study administrator navigates the microscope to a landmark,
takes a snapshot of the microscope FOV, and eeDAP records the stage
coordinates. Then the study administrator clicks near the corresponding
location in the WSI image displayed in the GUI. eeDAP then finds the local
registration by maximizing the match of the camera image and WSI.

\begin{figure}[ptbh]
\label{fig_full-eeDAPregistration}
\includegraphics[width=6.50000in]{C:/000_github/000_EEDAP/MDDT/figures/full-eeDAPregistration.pdf}
\caption{Screen shot of the image registration GUI, including the window
showng the camera image.}%
\end{figure}

The \textbf{data collection} GUI is the same for digital and microscope modes.
The GUI shows the WSI FOV and has interfaces for collecting the pathologist's
responses. The difference between modes is that, when run in digital mode, the
pathologist sits at the computer and interacts with the data collection GUI.
In microscope mode, a study administrator sits at the computer and interacts
with the data collection GUI. Meanwhile, the pathologist is engaged with the
microscope. The pathologist speaks his or her responses for the study
administrator to enter into the GUI. The study administrator also has the
responsibility of verifying that the microscope is accurately registered. If
it is not, there are buttons to perform an automated local registration of the
current FOV.

\begin{figure}[ptbh]
\label{fig_full-eeDAPdataCollectionGUI}
\includegraphics[width=6.50000in]{C:/000_github/000_EEDAP/MDDT/figures/full-eeDAPdataCollectionGUI.pdf}
\caption{Screenshot of eeDAP data collection GUI with camera image of
microscope view to verify accurate registration.}%
\end{figure}

For the cameras and stages tested, we are able to repeatably and reliably
register the WSI image and the glass slide so that the pathologists can
evaluate the same FOVs in both modes.

\section{Context of Use}

\label{context-of-use}

\subsection{The device or product area for which the MDDT is to be qualified.}

\label{the-device-or-product-area-for-which-the-mddt-is-to-be-qualified.}

eeDAP is to be qualified for the evaluation of whole slide imaging systems
(WSI systems) , also known as virtual microscopy systems, which can digitize
whole slides at microscopic resolution in a short period of time
\cite{Rojo2006_Int-J-Surg-Pathol_v14p285}. WSI systems are part of the vision
for digital pathology (DP). DP incorporates the acquisition, management, and
interpretation of pathology information, including WSIs. The imaging chain of
a WSI system consists of multiple components including the light source,
optics, motorized stage, and a sensor for image acquisition. WSI systems also
have embedded software for identifying tissue on the slide, auto-focusing,
selecting and combining different fields of view (FOVs) in a composite image,
and image processing (color management, image compression, etc.). Details
regarding the components of WSI systems can be found in a paper by Gu and
Ogilvie \cite{Gu2005_book}.

The potential public impact of WSI systems are well documented and include
telepathology, digital consultation and slide sharing, pathology education,
indexing and retrieval of cases, and the use of automated image analysis
\cite{Pantanowitz2011_J-Pathol-Inform_v2p36,
Weinstein2009_Hum-Pathol_v40p1057, Al-Janabi2012_Histopathology_v61p1}.

In addition to WSI systems, eeDAP is to be qualified for the evaluation of WSI
image analysis tools and CAD algorithms (computer aided diagnosis, detection,
prognosis, etc.). Examples of such tools include:

\begin{itemize}
\item Color standardization/normalization

\item Segmentation of tumors and other tissue structures

\item Automated detection of different cell types and biomarkers

\item Image retrieval

\item Decomposing images containing multiple biomarkers (multiplex images)

\item Diagnosis and prognosis, subtyping, and staging of cancer and non-cancer diseases
\end{itemize}

\subsection{The stage(s) of device development (e.g., early feasibility study,
pivotal study, etc.)}

\label{the-stages-of-device-development-e.g.-early-feasibility-study-pivotal-study-etc.}%


The stage of WSI development is advanced. WSI devices have received approval
elsewhere in the world (references? European Union, UK and Ireland, and
Canada.) In the United States, however, WSI devices are available for research
and education, but they have not been approved for clinical use. The challenge
for FDA approval is that there is not a clear pathway to approval. There is
guidance for the technical assessment
\cite{FDA2016_Guidance-DigiPathTechnical}, but there is not guidance for the
reproducibility/feature studies or the clinical trial. However, the FDA has
communicated an outline for the clinical trial
\cite{Anderson2016_Path-Visions_presentation}.

The stage of development of WSI image analysis tools and CAD algorithms is
broad. There are likely applications that are ready for clinical use and
applications that are still in the early stages of development. For the
applications early in the development cycle, it is expected that the approval
of WSI systems will lead to a substantial increase in data (images +
annotations + outcomes). Consequently, it is expected that the pace of image
analysis development will increase and more applications will be ready for
clinical use in the near future.

\subsection{The specific role of the MDDT (for clinical uses this includes the
study population or disease characteristics, as well as specific use --
diagnosis, patient selection, clinical endpoints).}

\label{the-specific-role-of-the-mddt-for-clinical-uses-this-includes-the-study-population-or-disease-characteristics-as-well-as-specific-use-diagnosis-patient-selection-clinical-endpoints.}%


The main role of eeDAP is to collect task-based evaluations of tissue features
and cell features digitally and on the microscope. These task-based
evaluations yield a performance result for pathologists using the WSI and
using the microscope (a reference method). The comparison of these performance
results can provide evidence to the effectiveness of a WSI system for
regulatory approvals and clearances. Likewise, task-based evaluations can be
used to provide evidence of effectiveness of image analysis tools and CADs.

\section{Advantages of eeDAP}

\label{advantages-of-eedap}

The advantage of using eeDAP compared to typical clinical evaluation protocols
is that eeDAP studies are fast and customizable, use fewer resources, and
yield performance results that are more precise and reproducible.

The speed comes from the fact that FOVs are queued up and automatically
presented to the pathologist; there is no need to search an entire slide.
Additionally, the pathologist evaluations are recorded electronically in
lock-step with the presentation of the FOVs. As such, there is little concern
for transcribing errors.

Fewer resources (slides) are needed because the sampling unit is the FOV
instead of the slide. Thanks to biological variability, the FOVs can often
sample a diverse set of presentations of the feature (detectability, counts,
orientations, morphologies, or classes). Precision and reproducibility are
improved because pathologists are basing their evaluations on the same tissue.

Regarding precision and reproducibility, current practices lead to extremely
noisy data. Specifically, let's consider the clinical protocol for mitotic
counting as recommended by Smedly et al. (Reference
Smedley2011\_Vet-Pathol\_v48p32). The mitotic index, ``should be determined by
counting the number of mitotic figures in 10 consecutive hpf {[}sic.
high-powered FOVs{]} commencing in the area of highest mitotic activity for
oral and lip neoplasms and in random fields for cutaneous neoplasms.'' This
protocol was followed in a study by collaborators at the NIH (Mark Simpson
PI). As part of the study, the pathologists saved annotations of the FOVs that
they used while evaluating the WSI. Figure 4 shows FOVs selected by different
pathologists. There is very little overlap in the FOVs; pathologists are
counting different mitotic figures from different tissue. Figure 5 shows the
within-reader correlation of counts made using the microscope compared to the
counts made using the WSI. Each point shows the counts from the same reader
evaluating the same case in the two modes, and each count is the sum of 10
FOVs. It is clear that this data yields a lot of variability. We expect to
show that eeDAP will significantly reduce this variability by forcing
pathologists to count mitotic figures in the same tissue.

\begin{figure}[ptbh]
\label{fig_full-MCSpathologistFOVs}
\includegraphics[width=6.50000in]{C:/000_github/000_EEDAP/MDDT/figures/full-MCSpathologistFOVs.pdf}
\caption{These two images show 10 FOVs selected by different readers while
performing a mitotic counting task. The top image corresponds to counts taken
at 20x and the bottom image corresponds to counts taken at 40x.}%
\end{figure}

\begin{figure}[ptbh]
\label{fig_full-MCSscatterPlot}
\includegraphics[width=6.50000in]{C:/000_github/000_EEDAP/MDDT/figures/full-MCSscatterPlot.pdf}
\caption{This figure shows the within-reader correlation of counts of mitotic
figures made on the microscope and made on the WSI. Each point shows the
counts from the same reader evaluating the same case on the two modalities.
Each count is the sum of 10 FOVs, following the clinical protocol. Note that
this plot is a log-log plot, and the subsequent coefficient of variation is
very large.}%
\end{figure}

\section{Disadvantages of eeDAP}

\label{disadvantages-of-eedap}

There are two disadvantages of eeDAP worth mentioning. First, when collecting
data in digital mode, the image is displayed with Matlab. As such, eeDAP
doesn't evaluate the native image viewer's human factors and workflow
components. Also, there is currently no panning or zooming.

The other main disadvantage is that eeDAP is primarily designed for tasks that
can be done on a finite FOV. The finite FOV may be at different
magnifications, but eeDAP is not designed for complicated tasks that explore
the WSI and aggregate different features. This disadvantage, however, keeps
the focus of eeDAP on evaluating image quality.

\section{Strength of Evidence}

\label{strength-of-evidence}

\textbf{Tool Validity: Does the available data adequately support the validity
of the measurement? Does the MDDT measure reliably and accurately? Depending
on the tool type, this may include analytical, clinical, and construct
validity, sensitivity, specificity, accuracy, precision, repeatability,
external validity, reduction of bias, verification of the constitutive model,
uncertainty quantification, numerical convergence, etc.}

\textbf{Plausibility: Is it scientifically plausible that the measurements
obtained through use of the MDDT are related to the true outcome of interest?
Is there a causal path or mechanistic explanation to connect the MDDT to the
outcome?}

\textbf{Extent of Prediction: What data are available to demonstrate a
predictive relationship between the MDDT and the true outcome of interest?
What is the strength of that predictive relationship? Is the prediction
repeatedly demonstrated in multiple studies or as a class effect? If relevant,
is the conclusion (that the effect of treatment on the measurement obtained
using the MDDT predicts the outcome of interest) supported by credible
information?}

\textbf{Capture: Does the MDDT fully capture the aggregate effect of the
intervention on the true outcome of interest? Does the MDDT account for every
major effect of the intervention? Are there available data which call this
into question?}

If our MDDT proposal is accepted, we will develop a full submission with
supporting evidence of benefits to using eeDAP for the context of use.

eeDAP can be used to evaluate the performance of pathologists to find,
classify, enumerate, and otherwise perform a feature-based task. The validity
of the task is not disputable, but the relevance (extent of prediction and
capture) to the device evaluation depends on whether or not the task is
relevant to the clinical task or somehow stresses relevant imaging characteristics.

In some cases, the extent of prediction will be very strong. For example, an
image analysis algorithm may be designed to find mitotic figures. In this
case, a study with eeDAP could be created to explicitly evaluate the
performance of the algorithm by collecting pathologist classifications on
candidate cells and evaluating the algorithm's true-positive and true-negative rates.

In other cases, the extent of prediction will not be as strong or direct. A
single eeDAP feature study may only demonstrate adequate image quality related
to one task or one imaging characteristic and additional tasks may be needed
to demonstrate adequate image quality related to other tasks or other imaging
characteristics. We believe that a few different feature studies could
demonstrate effectiveness that would be expected to generalize to a full and
comprehensive intended use statement. For example, counting mitotic figures is
a task that stresses the resolution of the WSI system, as fine details of the
nucleus and chromosomes are needed to find and classify cells as mitotic
figures. Also, identifying lesion tissue at low magnification is a task that
stresses color resolution and dynamic range and could be designed for lower
magnification. Tasks such as these may be considered as surrogates to
\emph{all} clinical tasks, and it will be the aggregate of evidence on the
performance on such tasks that will adequately demonstrate effectiveness of a
WSI system, an image analysis tool, or a CAD.

At a technical level, we need to validate that the registration process is
accurate and the color representation in eeDAP is the same as would be in the
proprietary WSI system-specific viewer.

\section{Plan to get data}

\label{plan-to-get-data}

The main evidence that we plan to collect will be in the form of task-based
studies of tissue features. At least one study will compare a mitotic counting
study with eeDAP to the mitotic counting study following the clinical protocol
mentioned above. We plan to demonstrate that pathologist evaluations taken
with eeDAP are more reproducible than pathologist evaluations taken following
a standard clinical method. In another study, additional evidence that we plan
to collect will demonstrate that differences in imaging characteristics can be
identified using eeDAP. For example, we intend to artificially degrade an
imaging characteristic (resolution, focus, color) and conduct a study using
eeDAP to show that the performance of pathologists is worse on the degraded
system than on the baseline system.

For the evidence of technical validity we plan to design a study to
characterize the accuracy of the image registration process and the color
fidelity. For the color fidelity evaluation, we plan to follow the methods
outlined previously (Reference Gallas2014\_J-Med-Img\_v1p037501).

\section{Consent to Public Disclosure and Use}

\label{consent-to-public-disclosure-and-use}

The compiled eeDAP software and all source code are shared on Github with HTML
and PDF versions of user manuals. The only prerequisite software for compiled
eeDAP software is the MATLAB runtime compiler (Reference MatlabRuntime2016),
which is free to download and use. These guarantee (1) FDA can make public
sufficient information to support use of the qualified eeDAP and (2) the
general public can use the eeDAP and rely on data generated using eeDAP in
gaining FDA clearance or approval of other devices.

\section{References}

\label{references}

\bibliographystyle{PLAIN}
\bibliography{master}



\end{document}